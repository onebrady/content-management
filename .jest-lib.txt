
> content-management-tool@1.0.0 test:lib D:\Projects\WesternTruck\ContentDevelopmentFlow
> jest "src/lib/" "--verbose" "--no-coverage" "--runInBand"

PASS src/lib/__tests__/permissions.test.ts
  Permissions Utilities
    hasPermission
      ΓêÜ should return true if the role has the permission (2 ms)
      ΓêÜ should return false if the role does not have the permission
    isRoleAtLeast
      ΓêÜ should return true if the role is at least the specified level (1 ms)
      ΓêÜ should return false if the role is below the specified level (1 ms)
    CONTENT_PERMISSIONS
      ΓêÜ should correctly determine if a role can view content (1 ms)
      ΓêÜ should correctly determine if a role can create content
      ΓêÜ should correctly determine if a role can edit content
      ΓêÜ should correctly determine if a role can delete content
      ΓêÜ should correctly determine if a role can publish content (2 ms)
      ΓêÜ should correctly determine if a role can comment on content (1 ms)
      ΓêÜ should correctly determine if a role can version content
      ΓêÜ should correctly determine if a role can restore content versions (1 ms)
    ROLE_PERMISSIONS
      ΓêÜ should define permissions for each role
      ΓêÜ should have increasing permissions with higher roles (1 ms)

PASS src/lib/__tests__/project-board-models.test.ts
  Project Board Models and Utils
    New Enum Values
      ProjectVisibility
        ΓêÜ should have the correct visibility values (1 ms)
      ProjectActivityAction
        ΓêÜ should have board-related actions
        ΓêÜ should have card-related actions
        ΓêÜ should have collaboration actions (1 ms)
        ΓêÜ should have checklist actions
    BoardUtils
      calculateChecklistProgress
        ΓêÜ should calculate progress correctly with completed items (1 ms)
        ΓêÜ should handle empty checklists
        ΓêÜ should handle checklists with no items (1 ms)
        ΓêÜ should handle all completed items
        ΓêÜ should handle all incomplete items
    Model Structure Validation
      ΓêÜ should have consistent interface for project cards (1 ms)
      ΓêÜ should have consistent interface for project lists (1 ms)
      ΓêÜ should have consistent interface for enhanced projects

PASS src/lib/__tests__/search.test.ts
  Search Utilities
    buildSearchQueryString
      ΓêÜ should build a query string with a search query (2 ms)
      ΓêÜ should build a query string with pagination
      ΓêÜ should not include page if it is 1 (1 ms)
      ΓêÜ should not include limit if it is 10
      ΓêÜ should build a query string with status filters
      ΓêÜ should build a query string with type filters
      ΓêÜ should build a query string with priority filters
      ΓêÜ should build a query string with tag filters (2 ms)
      ΓêÜ should build a query string with author and assignee filters (1 ms)
      ΓêÜ should build a query string with date range filters
      ΓêÜ should build a query string with sort options
      ΓêÜ should not include default sort options
      ΓêÜ should build a complex query string with multiple filters

PASS src/lib/__tests__/database-enums.test.ts
  Database Enums
    ContentStatus
      ΓêÜ should have the correct values (2 ms)
      ΓêÜ should not have PENDING value
    ContentType
      ΓêÜ should have the correct values (1 ms)
    Priority
      ΓêÜ should have the correct values
    ApprovalStatus
      ΓêÜ should have the correct values (1 ms)
    UserRole
      ΓêÜ should have the correct values
    ProjectVisibility
      ΓêÜ should have the correct values
    ProjectActivityAction
      ΓêÜ should have the correct board action values
      ΓêÜ should have the correct card action values
      ΓêÜ should have the correct collaboration action values (1 ms)
      ΓêÜ should have the correct checklist action values

PASS src/lib/__tests__/analytics.test.ts
  Analytics Utilities
    getDefaultTimeRange
      ΓêÜ should return a time range with start and end dates (1 ms)
      ΓêÜ should set start date to 30 days before end date (1 ms)
    exportAnalyticsToCSV
      ΓêÜ should generate CSV with all sections
      ΓêÜ should include summary metrics
      ΓêÜ should handle null averageApprovalTime
      ΓêÜ should include content status data (1 ms)
      ΓêÜ should include content type data (2 ms)
      ΓêÜ should include content creation over time data

PASS src/lib/projects/__tests__/order.test.ts
  computeNextStatusOrder
    ΓêÜ inserts into empty list ΓåÆ 0 (1 ms)
    ΓêÜ inserts at start when only next exists ΓåÆ next - 1000
    ΓêÜ inserts at end when only prev exists ΓåÆ prev + 1000
    ΓêÜ inserts between with sufficient gap ΓåÆ midpoint (1 ms)
    ΓêÜ inserts between with dense gap (<=1) ΓåÆ prev + 1
    ΓêÜ bounds destIndex within [0, length]

FAIL src/lib/__tests__/theme.test.ts
  ΓùÅ Test suite failed to run

    TypeError: (0 , _core.createTheme) is not a function

      3 |
      4 | // Create the base theme with colors and styling
    > 5 | export const customTheme = createTheme({
        |                                       ^
      6 |   // Set primary color to use our custom terracotta color
      7 |   primaryColor: 'terracotta',
      8 |

      at Object.<anonymous> (src/lib/theme.ts:5:39)
      at Object.<anonymous> (src/lib/__tests__/theme.test.ts:5:16)

Test Suites: 1 failed, 6 passed, 7 total
Tests:       65 passed, 65 total
Snapshots:   0 total
Time:        1.581 s
Ran all test suites matching src/lib/.
ΓÇëELIFECYCLEΓÇë Command failed with exit code 1.
